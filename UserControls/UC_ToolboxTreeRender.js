function UC_ToolboxTree(n){var i='<div>\t<style>        body, html {            margin: 0;            padding: 0;            width: 100%;            height: 100%;            overflow: hidden;            font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif;            color: #333;        }                #graph-container {            width: 100%;            height: 100vh;            background-color: #656F7A;            /* background-image: radial-gradient(#e9ecef 1px, transparent 1px); */            background-size: 20px 20px;        }                .node {            cursor: pointer;            transition: filter 0.3s;        }                .node:hover {            filter: drop-shadow(0 0 6px rgba(0, 123, 255, 0.5));        }                .node rect {            stroke: #6c757d;            stroke-width: 1.5px;            fill: #fff;            rx: 6px;            ry: 6px;            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.12));            transition: fill 0.2s;        }                .node:hover rect {            fill: #f8f9fa;        }                .node text {            font-size: 12px;            text-anchor: middle;            dominant-baseline: middle;            pointer-events: none;            font-weight: 500;        }                .link {            fill: none;            stroke: #adb5bd;            stroke-width: 1.5px;            stroke-dasharray: 5, 5;            marker-end: url(#arrowhead);        }                .controls {            position: absolute;            top: 20px;            left: 20px;            z-index: 10;            background: rgba(255, 255, 255, 0.95);            padding: 15px;            border-radius: 8px;            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);            display: flex;            flex-direction: column;            gap: 8px;        }                .control-row {            display: flex;            gap: 8px;        }                button {            padding: 8px 12px;            border: none;            border-radius: 4px;            background: #f0f0f0;            color: #333;            font-weight: 500;            cursor: pointer;            transition: all 0.2s;            box-shadow: 0 1px 3px rgba(0,0,0,0.1);        }                button:hover {            background: #e0e0e0;            transform: translateY(-1px);        }                button:active {            transform: translateY(1px);        }                button.primary {            background: #0d6efd;            color: white;        }                button.primary:hover {            background: #0b5ed7;        }                .title {            margin: 0 0 10px 0;            font-size: 16px;            font-weight: 600;        }                .popover {            position: absolute;            padding: 15px;            background: white;            border-radius: 8px;            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);            z-index: 100;            max-width: 300px;            opacity: 0;            pointer-events: none;            transition: opacity 0.2s;        }                .popover.active {            opacity: 1;            pointer-events: all;        }                .popover h3 {            margin: 0 0 10px 0;            font-size: 16px;            padding-bottom: 8px;            border-bottom: 1px solid #e9ecef;        }                .popover .info-row {            display: flex;            margin-bottom: 8px;        }                .popover .label {            font-weight: 600;            min-width: 80px;        }                .popover .value {            flex: 1;        }                .popover .close {            position: absolute;            top: 10px;            right: 10px;            cursor: pointer;            font-size: 16px;            color: #adb5bd;        }                .popover .close:hover {            color: #495057;        }                .footer {            position: absolute;            bottom: 20px;            left: 20px;            font-size: 12px;            color: #6c757d;        }                .node-counter {            position: absolute;            bottom: 20px;            right: 20px;            background: rgba(255, 255, 255, 0.9);            padding: 8px 12px;            border-radius: 4px;            font-size: 12px;            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);        }    <\/style>\t<div id="graph-container"><\/div>        <div class="popover" id="popover">        <div class="close" onclick="closePopover()">Ã—<\/div>        <h3 id="popover-title">Page Title<\/h3>        <div class="info-row">            <div class="label">ID:<\/div>            <div class="value" id="popover-id">1<\/div>        <\/div>        <div class="info-row">            <div class="label">Parent:<\/div>            <div class="value" id="popover-parent">None<\/div>        <\/div>        <div class="info-row">            <div class="label">Children:<\/div>            <div class="value" id="popover-children">3<\/div>        <\/div>        <div class="info-row">            <div class="label">Created:<\/div>            <div class="value" id="popover-created">2023-04-15<\/div>        <\/div>        <div class="info-row">            <div class="label">Status:<\/div>            <div class="value" id="popover-status">Active<\/div>        <\/div>    <\/div>        <div class="node-counter">        Nodes: <span id="node-count">0<\/span>    <\/div><\/div>',u={},r,t;Mustache.parse(i);this.show=function(){r=n(this.getContainerControl());this.setHtml(Mustache.render(i,this,u));this.renderChildContainers();this.Start()};this.Scripts=[];this.Start=function(){function s(n){switch(n){case"Published":return"#28a745";case"Draft":return"#ffc107";case"Archived":return"#6c757d";default:return"#007bff"}}function a(){c=!c;c?(n.nodes.forEach(n=>{n.fx=null,n.fy=null}),i.alphaTarget(.3).restart(),setTimeout(()=>i.alphaTarget(0),1e3)):(n.nodes.forEach(n=>{n.fx=n.x,n.fy=n.y}),i.alphaTarget(0))}function d(){u.attr("d",t=>{const i=n.nodes.find(n=>n.id===t.source.id||n.id===t.source),r=n.nodes.find(n=>n.id===t.target.id||n.id===t.target);if(!i||!r)return"";const h=Math.max(i.title.length*8,100),c=Math.max(r.title.length*8,100),f=i.x,e=i.y,o=r.x,s=r.y,l=o-f,a=s-e,u=Math.atan2(a,l),v=f+Math.cos(u)*(h/2),y=e+Math.sin(u)*20,p=o-Math.cos(u)*(c/2),w=s-Math.sin(u)*20;return`M${v},${y} L${p},${w}`});t.attr("transform",n=>`translate(${n.x},${n.y})`)}function v(n,t){console.log(n);n.active||i.alphaTarget(.3).restart();t.fx=t.x;t.fy=t.y;l()}function y(n,t){t.fx=n.x;t.fy=n.y}function p(n){n.active||i.alphaTarget(0)}function w(t,i){t.stopPropagation();let r="None";if(i.parentId){const t=n.nodes.find(n=>n.id===i.parentId);t&&(r=t.title)}d3.select("#popover-title").text(i.title);d3.select("#popover-id").text(i.id);d3.select("#popover-parent").text(r);d3.select("#popover-children").text(i.children.length);d3.select("#popover-created").text(i.created);d3.select("#popover-status").text(i.status);const u=d3.select("#popover");u.style("left",t.pageX+15+"px").style("top",t.pageY-15+"px").classed("active",!0);document.addEventListener("click",b)}function b(n){n.target.closest("#popover")||n.target.closest(".node")||l()}function l(){d3.select("#popover").classed("active",!1);document.removeEventListener("click",b)}function k(){d3.select("#node-count").text(n.nodes.length)}function g(){u=u.data(n.links);u.exit().remove();u=u.enter().append("path").attr("class","link").merge(u);t=t.data(n.nodes);t.exit().remove();const i=t.enter().append("g").attr("class","node").attr("transform",n=>`translate(${n.x},${n.y})`).call(d3.drag().on("start",v).on("drag",y).on("end",p)).on("click",w);i.append("rect").attr("width",n=>Math.max(n.title.length*8,100)).attr("height",40).attr("x",n=>-Math.max(n.title.length*8,100)/2).attr("y",-20).style("stroke",n=>s(n.status));i.append("circle").attr("r",5).attr("cx",n=>Math.max(n.title.length*8,100)/2-10).attr("cy",-10).attr("fill",n=>s(n.status));i.append("text").text(n=>n.title).attr("dy",5);t=i.merge(t);k()}const e=window.innerWidth,o=window.innerHeight,r=d3.select("#graph-container").append("svg").attr("width",e).attr("height",o);r.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","0 -5 10 10").attr("refX",20).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#adb5bd");const h=r.append("g"),f=d3.zoom().scaleExtent([.1,4]).on("zoom",n=>{h.attr("transform",n.transform),l()});r.call(f);const n={nodes:[{id:"1",title:"Home Page",parentId:null,status:"Published",created:"2023-01-10",lastModified:"2023-04-01",views:12500,x:160.38108818014169,y:241.49175563767668,children:["2","3","4"],index:0,vy:0,vx:0,fx:-610,fy:102},{id:"2",title:"Products",parentId:"1",status:"Published",created:"2023-01-15",lastModified:"2023-03-20",views:8750,x:234.21713414452663,y:203.99968858623049,children:[],index:1,vy:0,vx:0,fx:-300,fy:-152},{id:"3",title:"Services",parentId:"1",status:"Published",created:"2023-01-15",lastModified:"2023-03-18",views:7300,x:152.57869477016035,y:139.69278572792626,children:[],index:2,vy:0,vx:0,fx:152.57869477016035,fy:139.69278572792626},{id:"4",title:"About Us",parentId:"1",status:"Published",created:"2023-01-12",lastModified:"2023-02-28",views:5200,x:492.61037418345535,y:496.46783876381375,children:[],index:3,vy:0,vx:0,fx:492.61037418345535,fy:496.46783876381375}],links:[{source:{id:"1",title:"Home Page",parentId:null,status:"Published",created:"2023-01-10",lastModified:"2023-04-01",views:12500,x:160.38108818014169,y:241.49175563767668,children:["2","3","4"],index:0,vy:0,vx:0,fx:160.38108818014169,fy:241.49175563767668},target:{id:"2",title:"Products",parentId:"1",status:"Published",created:"2023-01-15",lastModified:"2023-03-20",views:8750,x:234.21713414452663,y:203.99968858623049,children:[],index:1,vy:0,vx:0,fx:234.21713414452663,fy:203.99968858623049},index:0},{source:{id:"1",title:"Home Page",parentId:null,status:"Published",created:"2023-01-10",lastModified:"2023-04-01",views:12500,x:160.38108818014169,y:241.49175563767668,children:["2","3","4"],index:0,vy:0,vx:0,fx:160.38108818014169,fy:241.49175563767668},target:{id:"3",title:"Services",parentId:"1",status:"Published",created:"2023-01-15",lastModified:"2023-03-18",views:7300,x:152.57869477016035,y:139.69278572792626,children:[],index:2,vy:0,vx:0,fx:152.57869477016035,fy:139.69278572792626},index:1},{source:{id:"1",title:"Home Page",parentId:null,status:"Published",created:"2023-01-10",lastModified:"2023-04-01",views:12500,x:160.38108818014169,y:241.49175563767668,children:["2","3","4"],index:0,vy:0,vx:0,fx:160.38108818014169,fy:241.49175563767668},target:{id:"4",title:"About Us",parentId:"1",status:"Published",created:"2023-01-12",lastModified:"2023-02-28",views:5200,x:492.61037418345535,y:496.46783876381375,children:[],index:3,vy:0,vx:0,fx:492.61037418345535,fy:496.46783876381375},index:2}]};console.log(n);const u=h.selectAll(".link").data(n.links).enter().append("path").attr("class","link");const t=h.selectAll(".node").data(n.nodes).enter().append("g").attr("class","node").attr("transform",n=>`translate(${n.x},${n.y})`).call(d3.drag().on("start",v).on("drag",y).on("end",p)).on("click",w);t.append("rect").attr("width",n=>Math.max(n.title.length*8,100)).attr("height",200).attr("x",n=>-Math.max(n.title.length*8,100)/2).attr("y",-20).style("stroke",n=>s(n.status));t.append("circle").attr("r",5).attr("cx",n=>Math.max(n.title.length*8,100)/2-10).attr("cy",-10).attr("fill",n=>s(n.status));t.append("text").text(n=>n.title).attr("dy",5);const i=d3.forceSimulation(n.nodes).force("link",d3.forceLink(n.links).id(n=>n.id).distance(150)).force("charge",d3.forceManyBody().strength(-300)).force("center",d3.forceCenter(e/2,o/2)).on("tick",d).alphaDecay(.028);let c=!0;k();d3.select("#zoom-in").on("click",()=>{r.transition().duration(300).call(f.scaleBy,1.3)});d3.select("#zoom-out").on("click",()=>{r.transition().duration(300).call(f.scaleBy,.7)});d3.select("#reset").on("click",()=>{r.transition().duration(700).call(f.transform,d3.zoomIdentity.translate(e/2,o/2).scale(.8))});d3.select("#toggle-layout").on("click",()=>{a()});d3.select("#add-node").on("click",()=>{const u=Math.floor(Math.random()*n.nodes.length),t=n.nodes[u],r=(Math.max(...n.nodes.map(n=>parseInt(n.id)))+1).toString(),f={id:r,title:"New Page "+r,parentId:t.id,status:Math.random()>.3?"Published":"Draft",created:"2023-04-13",lastModified:"2023-04-13",views:0,x:t.x+(Math.random()*100-50),y:t.y+(Math.random()*100-50),children:[]};t.children.push(r);const e={source:t.id,target:r};n.nodes.push(f);n.links.push(e);i.nodes(n.nodes);i.force("link").links(n.links);g();i.alpha(1).restart()});r.call(f.transform,d3.zoomIdentity.translate(e/2,o/2).scale(.8));a()};this.autoToggleVisibility=!0;t={};this.renderChildContainers=function(){r.find("[data-slot][data-parent='"+this.ContainerName+"']").each(function(i,r){var e=n(r),f=e.attr("data-slot"),u;u=t[f];u||(u=this.getChildContainer(f),t[f]=u,u.parentNode.removeChild(u));e.append(u);n(u).show()}.closure(this))}}